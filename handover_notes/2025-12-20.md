# ================================
# Handover Notes
# ================================

## プロジェクト概要
- Flask + SQLAlchemy のタスク管理アプリ
- 認証（登録 / ログイン / ログアウト）実装済み
- Docker + Nginx で HTTPS 対応
- GitHub Flow（main + feature ブランチ運用）

---

## 現在の作業ブランチ
- ブランチ名
  feature/flask-blueprint-refactor

- 作業概要
  Blueprint 化および Application Factory パターン導入による
  アプリ構成のリファクタリング

---

## 作業背景・判断理由
- 機能追加（メール送信）を進める前に、保守性・拡張性を優先
- 単一 app.py 構成では今後の機能追加時に責務が肥大化すると判断
- 実務を意識し、Blueprint + factory パターン構成へ移行する方針とした

---

## 本日の対応内容
- extensions.py を新規作成し、拡張機能分離の土台を用意
- config.py を作成（環境変数ベース設定を想定、詳細実装は未着手）
- create_app() による Application Factory の雛形を作成
- wsgi.py を作成し、Flask CLI / Gunicorn から起動可能に設定
- 最低限アプリが起動することを確認

---

## 実装済み / 確認済み事項
- Git ブランチ運用整理（feature ブランチ作成・main の安定化）
- 環境変数の分離運用
  - .env.app（アプリ用）
  - .env.db（DB 用）
- メール送信機能の技術選定
  - Flask-Mail
  - MailHog（ローカル SMTP）
- Blueprint / Factory パターン導入の動作確認
- wsgi.py 経由での最低限起動確認

---

## 未対応 / 次にやること
- Blueprint 化の実装継続
  - auth / tasks / profile のルーティング分離
- Flask-Mail 導入
- MailHog を用いたメール送信・受信確認
- Gunicorn を用いた本番環境起動設定
- feature ブランチ完了後、main へマージ

---

## 起動・確認手順
### Docker 起動
docker-compose up --build

### MailHog 確認
http://localhost:8025

### アプリ確認
http://localhost:5001
https://localhost

---

## Git 操作メモ
git status
git branch

### feature → main マージ手順
git checkout main
git pull
git merge feature/flask-blueprint-refactor
git push

---

## 注意点
- .env / 証明書 / 永続ボリュームは Git 管理外
- main ブランチは常にデプロイ可能な状態を維持
- 作業途中のコードは必ず feature ブランチで管理
- wsgi.py での起動経路を固定済みのため、flask CLI の自動探索に依存しない
