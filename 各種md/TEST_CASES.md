# テストケース一覧

## 1. 認証機能のテストケース

### 1.1 ログイン機能

#### TC-AUTH-001: 正常なログイン
- **前提条件**: 登録済みユーザーが存在する
- **手順**:
  1. ログイン画面にアクセス
  2. 正しいユーザー名とパスワードを入力
  3. 「ログイン」ボタンをクリック
- **期待結果**: タスク一覧画面にリダイレクトされる

#### TC-AUTH-002: 間違ったユーザー名でログイン
- **前提条件**: 登録済みユーザーが存在する
- **手順**:
  1. ログイン画面にアクセス
  2. 存在しないユーザー名とパスワードを入力
  3. 「ログイン」ボタンをクリック
- **期待結果**: エラーメッセージ「ユーザー名かパスワードが違います」が表示される

#### TC-AUTH-003: 間違ったパスワードでログイン
- **前提条件**: 登録済みユーザーが存在する
- **手順**:
  1. ログイン画面にアクセス
  2. 正しいユーザー名と間違ったパスワードを入力
  3. 「ログイン」ボタンをクリック
- **期待結果**: エラーメッセージ「ユーザー名かパスワードが違います」が表示される

#### TC-AUTH-004: 空のフィールドでログイン
- **手順**:
  1. ログイン画面にアクセス
  2. ユーザー名またはパスワードを空のまま
  3. 「ログイン」ボタンをクリック
- **期待結果**: HTML5バリデーションにより送信が阻止される

#### TC-AUTH-005: ログイン状態を保持する機能
- **前提条件**: 登録済みユーザーが存在する
- **手順**:
  1. ログイン画面にアクセス
  2. 正しいユーザー名とパスワードを入力
  3. 「ログイン状態を保持」にチェックを入れる
  4. 「ログイン」ボタンをクリック
  5. ブラウザを閉じて再度開く
- **期待結果**: ログイン状態が維持されている

### 1.2 ログアウト機能

#### TC-AUTH-006: 正常なログアウト
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク一覧画面にアクセス
  2. 「ログアウト」ボタンをクリック
  3. 確認モーダルで「OK」をクリック
- **期待結果**: ログイン画面にリダイレクトされる

#### TC-AUTH-007: ログアウト確認モーダルのキャンセル
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク一覧画面にアクセス
  2. 「ログアウト」ボタンをクリック
  3. 確認モーダルで「キャンセル」をクリック
- **期待結果**: モーダルが閉じ、ログイン状態が維持される

### 1.3 新規登録機能

#### TC-AUTH-008: 正常な新規登録
- **手順**:
  1. 新規登録画面にアクセス
  2. ユーザー名、メールアドレス、パスワードを入力
  3. 「確認」ボタンをクリック
  4. 確認画面で「登録する」ボタンをクリック
- **期待結果**: タスク一覧画面にリダイレクトされ、新規ユーザーが登録される

#### TC-AUTH-009: ユーザー名の重複チェック
- **前提条件**: 既存ユーザーが存在する
- **手順**:
  1. 新規登録画面にアクセス
  2. 既存のユーザー名、新しいメールアドレス、パスワードを入力
  3. 「確認」ボタンをクリック
  4. 確認画面で「登録する」ボタンをクリック
- **期待結果**: エラーメッセージ「ユーザー名はすでに使われています」が表示され、登録画面に戻る

#### TC-AUTH-010: メールアドレスの重複チェック
- **前提条件**: 既存ユーザーが存在する
- **手順**:
  1. 新規登録画面にアクセス
  2. 新しいユーザー名、既存のメールアドレス、パスワードを入力
  3. 「確認」ボタンをクリック
  4. 確認画面で「登録する」ボタンをクリック
- **期待結果**: エラーメッセージ「メールアドレスはすでに使われています」が表示され、登録画面に戻る

#### TC-AUTH-011: 空のフィールドでの新規登録
- **手順**:
  1. 新規登録画面にアクセス
  2. 必須フィールドを空のまま「確認」ボタンをクリック
- **期待結果**: HTML5バリデーションにより送信が阻止される

## 2. タスク管理機能のテストケース

### 2.1 タスク一覧表示

#### TC-TASK-001: タスク一覧の表示
- **前提条件**: ログイン済みユーザー、タスクが存在する
- **手順**:
  1. タスク一覧画面にアクセス
- **期待結果**: ユーザーのタスクが一覧表示される（新しい順）

#### TC-TASK-002: タスクが0件の場合
- **前提条件**: ログイン済みユーザー、タスクが0件
- **手順**:
  1. タスク一覧画面にアクセス
- **期待結果**: 空のタスク一覧が表示される

#### TC-TASK-003: 他のユーザーのタスクが表示されない
- **前提条件**: 複数ユーザーが存在し、それぞれタスクを持っている
- **手順**:
  1. ユーザーAでログイン
  2. タスク一覧画面にアクセス
- **期待結果**: ユーザーAのタスクのみが表示される

### 2.2 タスク作成機能

#### TC-TASK-004: 正常なタスク作成
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 「新規タスク作成」ボタンをクリック
  2. タイトル、詳細、期限日、状態、優先度、カテゴリを入力
  3. 確認モーダルで「登録する」をクリック
- **期待結果**: タスクが作成され、タスク一覧画面にリダイレクトされる

#### TC-TASK-005: タイトルのみでタスク作成
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 「新規タスク作成」ボタンをクリック
  2. タイトルのみ入力（必須項目）
  3. 確認モーダルで「登録する」をクリック
- **期待結果**: タスクが作成される

#### TC-TASK-006: 空のタイトルでタスク作成
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 「新規タスク作成」ボタンをクリック
  2. タイトルを空のまま「タスクを登録」ボタンをクリック
- **期待結果**: HTML5バリデーションにより送信が阻止される

#### TC-TASK-007: 期限日の入力
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 「新規タスク作成」ボタンをクリック
  2. タイトルと期限日を入力
  3. 確認モーダルで「登録する」をクリック
- **期待結果**: 期限日が正しく保存される

#### TC-TASK-008: タスク作成のキャンセル
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 「新規タスク作成」ボタンをクリック
  2. フォームに入力
  3. 確認モーダルで「キャンセル」をクリック
- **期待結果**: モーダルが閉じ、フォームが残る

### 2.3 タスク編集機能

#### TC-TASK-009: 正常なタスク編集
- **前提条件**: ログイン済みユーザー、タスクが存在する
- **手順**:
  1. タスク一覧から編集したいタスクの「編集」ボタンをクリック
  2. タスク情報を変更
  3. 確認モーダルで「更新する」をクリック
- **期待結果**: タスクが更新され、タスク一覧画面にリダイレクトされる

#### TC-TASK-010: タスク編集のキャンセル
- **前提条件**: ログイン済みユーザー、タスクが存在する
- **手順**:
  1. タスク一覧から編集したいタスクの「編集」ボタンをクリック
  2. タスク情報を変更
  3. 確認モーダルで「キャンセル」をクリック
- **期待結果**: モーダルが閉じ、変更が保存されない

#### TC-TASK-011: 存在しないタスクの編集
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 存在しないタスクIDで編集画面にアクセス（例: /tasks/99999/edit）
- **期待結果**: 404エラーが返される

### 2.4 タスク削除機能

#### TC-TASK-012: 正常なタスク削除
- **前提条件**: ログイン済みユーザー、タスクが存在する
- **手順**:
  1. タスク一覧から削除したいタスクの「削除」ボタンをクリック
  2. 確認モーダルで「削除する」をクリック
- **期待結果**: タスクが削除され、タスク一覧から消える

#### TC-TASK-013: タスク削除のキャンセル
- **前提条件**: ログイン済みユーザー、タスクが存在する
- **手順**:
  1. タスク一覧から削除したいタスクの「削除」ボタンをクリック
  2. 確認モーダルで「キャンセル」をクリック
- **期待結果**: モーダルが閉じ、タスクが削除されない

#### TC-TASK-014: 存在しないタスクの削除
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. 存在しないタスクIDで削除リクエストを送信
- **期待結果**: 404エラーが返される

### 2.5 タスクフィルタリング機能

#### TC-TASK-015: ステータスでフィルタリング
- **前提条件**: ログイン済みユーザー、複数のステータスのタスクが存在する
- **手順**:
  1. タスク一覧画面でステータスフィルターを「進行中」に設定
- **期待結果**: 「進行中」のタスクのみが表示される

#### TC-TASK-016: 優先度でフィルタリング
- **前提条件**: ログイン済みユーザー、複数の優先度のタスクが存在する
- **手順**:
  1. タスク一覧画面で優先度フィルターを「高」に設定
- **期待結果**: 「高」優先度のタスクのみが表示される

#### TC-TASK-017: キーワード検索
- **前提条件**: ログイン済みユーザー、複数のタスクが存在する
- **手順**:
  1. タスク一覧画面でキーワード検索欄に「テスト」と入力
  2. 「検索」ボタンをクリック
- **期待結果**: タイトルに「テスト」を含むタスクのみが表示される

#### TC-TASK-018: 複数フィルターの組み合わせ
- **前提条件**: ログイン済みユーザー、複数のタスクが存在する
- **手順**:
  1. タスク一覧画面でステータス「進行中」、優先度「高」、キーワード「重要」を設定
- **期待結果**: すべての条件に一致するタスクのみが表示される

### 2.6 統計情報表示

#### TC-TASK-019: 統計情報の表示
- **前提条件**: ログイン済みユーザー、タスクが存在する
- **手順**:
  1. タスク一覧画面にアクセス
- **期待結果**: 総タスク数、高優先度数、進行中数、完了数が正しく表示される

## 3. プロフィール管理機能のテストケース

### 3.1 基本情報更新

#### TC-PROFILE-001: 正常な基本情報更新
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. ユーザー名とメールアドレスを変更
  3. 「変更を保存」ボタンをクリック
- **期待結果**: 基本情報が更新され、成功メッセージが表示される

#### TC-PROFILE-002: メールアドレスの重複チェック
- **前提条件**: ログイン済みユーザー、他のユーザーが存在する
- **手順**:
  1. プロフィール画面にアクセス
  2. 他のユーザーが使用しているメールアドレスに変更
  3. 「変更を保存」ボタンをクリック
- **期待結果**: エラーメッセージ「メールアドレスはすでに使われています」が表示される

#### TC-PROFILE-003: 同じメールアドレスへの変更
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 現在のメールアドレスと同じメールアドレスに変更
  3. 「変更を保存」ボタンをクリック
- **期待結果**: 正常に更新される（自分のメールアドレスなので重複エラーにならない）

#### TC-PROFILE-004: 基本情報更新のキャンセル
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. ユーザー名とメールアドレスを変更
  3. 「キャンセル」ボタンをクリック
- **期待結果**: タスク一覧画面にリダイレクトされ、変更が保存されない

### 3.2 パスワード変更機能

#### TC-PROFILE-005: 正常なパスワード変更
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 現在のパスワード、新しいパスワード（8文字以上）、確認パスワードを入力
  3. 「パスワード更新」ボタンをクリック
- **期待結果**: パスワードが更新され、成功メッセージが表示される

#### TC-PROFILE-006: 間違った現在のパスワード
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 間違った現在のパスワード、新しいパスワード、確認パスワードを入力
  3. 「パスワード更新」ボタンをクリック
- **期待結果**: エラーメッセージ「パスワードが違います」が表示される

#### TC-PROFILE-007: 8文字未満のパスワード
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 現在のパスワード、7文字の新しいパスワード、確認パスワードを入力
  3. 「パスワード更新」ボタンをクリック
- **期待結果**: エラーメッセージ「パスワードは8文字以上で入力してください」が表示される

#### TC-PROFILE-008: パスワードと確認パスワードの不一致
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 現在のパスワード、新しいパスワード、異なる確認パスワードを入力
  3. 「パスワード更新」ボタンをクリック
- **期待結果**: エラーメッセージ「パスワードと再入力パスワードが一致しません」が表示される

#### TC-PROFILE-009: パスワード表示/非表示切り替え
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. パスワード入力欄の目のアイコンをクリック
- **期待結果**: パスワードが表示される。再度クリックすると非表示になる

### 3.3 アカウント削除機能

#### TC-PROFILE-010: 正常なアカウント削除
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 「アカウントを削除する」ボタンをクリック
  3. 確認モーダルで「削除する」をクリック
- **期待結果**: アカウントが削除され、ログイン画面にリダイレクトされる

#### TC-PROFILE-011: アカウント削除のキャンセル
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. 「アカウントを削除する」ボタンをクリック
  3. 確認モーダルで「キャンセル」をクリック
- **期待結果**: モーダルが閉じ、アカウントが削除されない

## 4. セキュリティテストケース

### 4.1 認証・認可

#### TC-SEC-001: 未ログイン時のタスク一覧アクセス
- **手順**:
  1. ログアウト状態で `/tasks` にアクセス
- **期待結果**: ログイン画面にリダイレクトされる

#### TC-SEC-002: 未ログイン時のタスク作成アクセス
- **手順**:
  1. ログアウト状態で `/tasks/new` にアクセス
- **期待結果**: ログイン画面にリダイレクトされる

#### TC-SEC-003: 未ログイン時のタスク編集アクセス
- **手順**:
  1. ログアウト状態で `/tasks/1/edit` にアクセス
- **期待結果**: ログイン画面にリダイレクトされる

#### TC-SEC-004: 未ログイン時のプロフィールアクセス
- **手順**:
  1. ログアウト状態で `/profile` にアクセス
- **期待結果**: ログイン画面にリダイレクトされる

#### TC-SEC-005: 他のユーザーのタスク編集
- **前提条件**: ユーザーAとユーザーBが存在し、それぞれタスクを持っている
- **手順**:
  1. ユーザーAでログイン
  2. ユーザーBのタスクIDで編集画面にアクセス
- **期待結果**: 404エラーが返される、または自分のタスクのみ編集可能

#### TC-SEC-006: 他のユーザーのタスク削除
- **前提条件**: ユーザーAとユーザーBが存在し、それぞれタスクを持っている
- **手順**:
  1. ユーザーAでログイン
  2. ユーザーBのタスクIDで削除リクエストを送信
- **期待結果**: 404エラーが返される、または自分のタスクのみ削除可能

### 4.2 入力値検証

#### TC-SEC-007: SQLインジェクション対策
- **手順**:
  1. タスクタイトルにSQLインジェクション文字列を入力（例: `'; DROP TABLE tasks; --`）
  2. タスクを作成
- **期待結果**: SQLインジェクションが実行されず、文字列として保存される

#### TC-SEC-008: XSS対策
- **手順**:
  1. タスクタイトルにスクリプトタグを入力（例: `<script>alert('XSS')</script>`）
  2. タスクを作成
- **期待結果**: スクリプトが実行されず、エスケープされて表示される

#### TC-SEC-009: CSRF対策
- **手順**:
  1. 外部サイトからタスク作成リクエストを送信
- **期待結果**: CSRFトークンがないためリクエストが拒否される（Flask-WTFを使用している場合）

## 5. UI/UXテストケース

### 5.1 ナビゲーション

#### TC-UI-001: ヘッダーからのタスク一覧遷移
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. プロフィール画面にアクセス
  2. ヘッダーの「タスク一覧」ボタンをクリック
- **期待結果**: タスク一覧画面に遷移する

#### TC-UI-002: ヘッダーからの新規タスク作成遷移
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク一覧画面にアクセス
  2. ヘッダーの「新規タスク作成」ボタンをクリック
- **期待結果**: タスク作成画面に遷移する

#### TC-UI-003: ヘッダーからのプロフィール遷移
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク一覧画面にアクセス
  2. ヘッダーの「プロフィール」ボタンをクリック
- **期待結果**: プロフィール画面に遷移する

### 5.2 レスポンシブデザイン

#### TC-UI-004: モバイル表示
- **手順**:
  1. モバイルデバイスまたはブラウザの開発者ツールでモバイルサイズに設定
  2. 各画面にアクセス
- **期待結果**: レイアウトが適切に調整され、すべての機能が使用可能

#### TC-UI-005: タブレット表示
- **手順**:
  1. タブレットサイズの画面で各画面にアクセス
- **期待結果**: レイアウトが適切に調整される

### 5.3 モーダル動作

#### TC-UI-006: モーダルの表示/非表示
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク作成画面で「タスクを登録」ボタンをクリック
  2. 確認モーダルが表示されることを確認
  3. 「キャンセル」ボタンをクリック
- **期待結果**: モーダルが正しく表示され、閉じる

#### TC-UI-007: 複数モーダルの競合回避
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク作成画面で確認モーダルを表示
  2. ログアウトボタンをクリック
- **期待結果**: 正しいモーダルが表示される（IDの重複がない）

## 6. パフォーマンステストケース

#### TC-PERF-001: 大量タスクの表示
- **前提条件**: ログイン済みユーザー、100件以上のタスクが存在する
- **手順**:
  1. タスク一覧画面にアクセス
- **期待結果**: ページが3秒以内に表示される

#### TC-PERF-002: フィルタリングのパフォーマンス
- **前提条件**: ログイン済みユーザー、大量のタスクが存在する
- **手順**:
  1. タスク一覧画面でフィルターを適用
- **期待結果**: フィルター結果が1秒以内に表示される

## 7. エラーハンドリングテストケース

#### TC-ERR-001: データベース接続エラー
- **手順**:
  1. データベースを停止
  2. アプリケーションにアクセス
- **期待結果**: 適切なエラーメッセージが表示される

#### TC-ERR-002: 無効な日付形式
- **前提条件**: ログイン済みユーザー
- **手順**:
  1. タスク作成画面で無効な日付形式を入力
- **期待結果**: エラーメッセージが表示される、またはHTML5バリデーションで阻止される

## 8. ブラウザ互換性テストケース

#### TC-BROWSER-001: Chromeでの動作確認
- **手順**:
  1. Google Chromeでアプリケーションにアクセス
  2. 主要機能をテスト
- **期待結果**: すべての機能が正常に動作する

#### TC-BROWSER-002: Firefoxでの動作確認
- **手順**:
  1. Mozilla Firefoxでアプリケーションにアクセス
  2. 主要機能をテスト
- **期待結果**: すべての機能が正常に動作する

#### TC-BROWSER-003: Edgeでの動作確認
- **手順**:
  1. Microsoft Edgeでアプリケーションにアクセス
  2. 主要機能をテスト
- **期待結果**: すべての機能が正常に動作する

#### TC-BROWSER-004: Safariでの動作確認
- **手順**:
  1. Safariでアプリケーションにアクセス
  2. 主要機能をテスト
- **期待結果**: すべての機能が正常に動作する

